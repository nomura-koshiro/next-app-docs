import type { Meta, StoryObj } from '@storybook/nextjs-vite';

import { MainErrorFallback } from './main';

/**
 * MainErrorFallbackコンポーネントのストーリー
 *
 * アプリケーション全体のエラーフォールバックコンポーネント。
 * ErrorBoundaryでキャッチされたエラーが発生した際に表示されます。
 *
 * @example
 * ```tsx
 * <MainErrorFallback />
 * ```
 */
const meta = {
  // ================================================================================
  // Storybookのナビゲーション階層
  // ================================================================================
  title: 'components/errors/MainErrorFallback',

  // ================================================================================
  // 表示するコンポーネント
  // ================================================================================
  component: MainErrorFallback,

  parameters: {
    // ================================================================================
    // レイアウト設定
    // ================================================================================
    layout: 'fullscreen',

    // ================================================================================
    // コンポーネントの詳細説明
    // ================================================================================
    docs: {
      description: {
        component:
          'ErrorBoundaryでキャッチされた致命的なエラーが発生した際にフルスクリーンで表示されるフォールバックUIコンポーネント。\n\n' +
          '**主な機能:**\n' +
          '- エラー発生の通知\n' +
          '- ユーザーへのメッセージ表示\n' +
          '- アクセシビリティ対応（role="alert"）\n' +
          '- フルスクリーン表示\n\n' +
          '**使用場面:**\n' +
          '- アプリケーション全体のエラーハンドリング\n' +
          '- 予期しないエラーが発生した際の表示\n' +
          '- ErrorBoundaryのフォールバックUI',
      },
    },
  },

  // ================================================================================
  // ドキュメント自動生成を有効化
  // ================================================================================
  tags: ['autodocs'],
} satisfies Meta<typeof MainErrorFallback>;

export default meta;
type Story = StoryObj<typeof meta>;

/**
 * デフォルトのエラーフォールバック表示
 *
 * ErrorBoundaryでキャッチされたエラーが発生した際に
 * フルスクリーンで表示されるフォールバックUIです。
 * role="alert"が設定されており、スクリーンリーダー対応済みです。
 */
export const Default: Story = {
  name: 'デフォルト',
  parameters: {
    docs: {
      description: {
        story:
          'アプリケーションで致命的なエラーが発生した際に表示されるフォールバックUI。ユーザーにエラーが発生したことを通知し、適切な対応を促します。',
      },
    },
  },
};
